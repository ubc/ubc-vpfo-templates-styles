(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".cat-tax-select"),n=t.querySelector("select"),a=Array.from(n.options),r=document.createElement("div");r.className="cat-tax-selected",r.setAttribute("role","combobox"),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","listbox"),r.setAttribute("tabindex","0");var o=document.createElement("span");o.className="cat-tax-placeholder",o.textContent="Select Multiple",o.setAttribute("aria-hidden","true");var i=document.createElement("div");i.className="cat-tax-selected-items";var c=document.createElement("span");c.className="arrow",c.innerHTML="&#9662;",r.append(o,i,c);var l=document.createElement("ul");function s(e){var n=t.classList.contains("open"),a=void 0!==e?e:!n;if(t.classList.toggle("open",a),r.setAttribute("aria-expanded",String(a)),a){var o=l.querySelector('[role="option"]');o&&o.focus()}}function u(t){var a=i.querySelector('[data-value="'.concat(t,'"]'));if(a){a.remove();var r=e(n.options).find((function(e){return e.value===t}));r&&(r.selected=!1),0===i.children.length&&(o.style.display="inline")}}l.className="cat-tax-options",l.setAttribute("role","listbox"),l.setAttribute("aria-multiselectable","true"),a.forEach((function(e){if(e.value){var t=document.createElement("li");t.dataset.value=e.value,t.textContent=e.textContent,t.setAttribute("role","option"),t.setAttribute("tabindex","-1"),l.appendChild(t)}})),t.appendChild(r),t.appendChild(l),r.addEventListener("click",(function(e){e.stopPropagation(),s()})),r.addEventListener("keydown",(function(e){"Enter"===e.key||" "===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key?(e.preventDefault(),s(!0)):"Escape"===e.key&&s(!1)})),t.addEventListener("focusout",(function(e){setTimeout((function(){t.contains(document.activeElement)||s(!1)}),0)})),l.addEventListener("click",(function(t){if("LI"===t.target.tagName){var a=t.target.dataset.value,r=t.target.textContent;if(!i.querySelector('[data-value="'.concat(a,'"]'))){var c=function(e,t){var n=document.createElement("span");return n.className="selected-item",n.dataset.value=e,n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("aria-label","Remove ".concat(t)),n.innerHTML="".concat(t,' <span class="remove">&times;</span>'),n}(a,r);i.appendChild(c);var l=e(n.options).find((function(e){return e.value===a}));l&&(l.selected=!0),o.style.display="none"}}})),i.addEventListener("keydown",(function(e){"Backspace"!==e.key&&"Delete"!==e.key&&"Enter"!==e.key&&" "!==e.key||!e.target.classList.contains("selected-item")||u(e.target.dataset.value)})),i.addEventListener("click",(function(e){var t=e.target.closest(".selected-item");t&&u(t.dataset.value)})),document.addEventListener("click",(function(e){t.contains(e.target)||s(!1)})),l.addEventListener("keydown",(function(e){var t=document.activeElement;if("ArrowDown"===e.key){e.preventDefault();var n=t.nextElementSibling;n&&n.focus()}else if("ArrowUp"===e.key){e.preventDefault();var a=t.previousElementSibling;a&&a.focus()}else"Enter"===e.key||" "===e.key?(e.preventDefault(),t.click()):"Escape"===e.key&&(s(!1),r.focus())}))}))})();